<div class="container">
  <h2>{{ isEdit ? 'Editar Curso' : 'Agregar Curso' }}</h2>
  <form #f="ngForm" (ngSubmit)="f.form.valid && guardarCurso()">
    
    <div class="form-group">
      <label for="tema">Tema</label>
      <select 
        class="form-control" 
        id="tema" 
        [(ngModel)]="curso.tema" 
        name="tema" 
        required>
        <option *ngFor="let tema of temas$ | async" [ngValue]="tema">{{ tema.nombre }}</option>
      </select>
      <div *ngIf="(f.submitted || f.controls['tema']?.touched) && !f.controls['tema']?.valid" class="invalid-feedback">
        Selecciona un tema.
      </div>
    </div>

    <div class="form-group">
      <label for="fechaInicio">Fecha de Inicio</label>
      <input 
        class="form-control" 
        id="fechaInicio" 
        [(ngModel)]="curso.fechaInicio" 
        name="fechaInicio" 
        type="date" 
        required>
      <div *ngIf="(f.submitted || f.controls['fechaInicio']?.touched) && !f.controls['fechaInicio']?.valid" class="invalid-feedback">
        Ingresa una fecha de inicio.
      </div>
    </div>

    <div class="form-group">
      <label for="fechaFin">Fecha de Finalización</label>
      <input 
        class="form-control" 
        id="fechaFin" 
        [(ngModel)]="curso.fechaFin" 
        name="fechaFin" 
        type="date" 
        required>
      <div *ngIf="(f.submitted || f.controls['fechaFin']?.touched) && !f.controls['fechaFin']?.valid" class="invalid-feedback">
        Ingresa una fecha de finalización.
      </div>
    </div>

    <div class="form-group">
      <label for="docente">Docente</label>
      <select 
        class="form-control" 
        id="docente" 
        [(ngModel)]="curso.docente_legajo" 
        name="docente" 
        required>
        <option *ngFor="let docente of docentes$ | async" [ngValue]="docente">{{ docente.nombre }}</option>
      </select>
      <div *ngIf="(f.submitted || f.controls['docente']?.touched) && !f.controls['docente']?.valid" class="invalid-feedback">
        Selecciona un docente.
      </div>
    </div>

    <div class="form-group">
      <label for="precio">Precio</label>
      <input 
        class="form-control" 
        id="precio" 
        [(ngModel)]="curso.precio" 
        name="precio" 
        type="number" 
        required
        min="0">
      <div *ngIf="(f.submitted || f.controls['precio']?.touched) && !f.controls['precio']?.valid" class="invalid-feedback">
        Ingresa un precio válido.
      </div>
    </div>

    <div class="form-group">
      <label for="alumnos">Alumnos</label>
      <select 
        class="form-control" 
        id="alumnos" 
        [(ngModel)]="curso.alumnos" 
        name="alumnos" 
        multiple 
        required
        >
        <option *ngFor="let alumno of alumnos$ | async" [ngValue]="alumno">{{ alumno.nombre }}</option>
      </select>
      <div *ngIf="(f.submitted || f.controls['alumnos']?.touched) && !f.controls['alumnos']?.valid" class="invalid-feedback">
        Selecciona al menos un alumno.
      </div>
    </div>
    
    <button type="submit" class="btn btn-primary" [disabled]="f.invalid">
      {{ isEdit ? 'Actualizar' : 'Guardar' }}
    </button>
    <button (click)="volver()" class="btn btn-secondary" >volver</button>
    <button type="reset" class="btn btn-danger btn-sm"> Reset </button>
  </form>
</div>

