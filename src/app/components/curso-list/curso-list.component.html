<div class="container">
  
  
  <div class="form-group">
    <!-- Filtro para buscar por fecha de finalizacion de cursos -->
    <h2 for="buscarFechaFin">Buscar cursos por Fecha de Finalizaci√≥n</h2>
    <input class="form-control" id="buscarFechaFin" [(ngModel)]="filtroFechaFin" name="buscarFechaFin" type="date">
    <button class="btn btn-primary mt-2" (click)="buscarCursosPorFecha()">
      <i class="bi bi-search"></i> Buscar
    </button>
    <button class="btn btn-warning mt-2" id="limpieza" (click)="reiniciar()"> <i class="bi bi-x-circle"></i> Limpiar</button>
  </div>
  <div class="form-group">
    <h3>Obtener Alumnos por Docente</h3>
    
    <div class="form-group">
      <label for="legajo">Seleccionar Docente</label>
      <!-- Lista para seleccionar el legajo del docente -->
      <select class="form-control" id="docente" [(ngModel)]="selectedLegajo" name="docente" required>
        <option *ngFor="let docente of docentes$ | async" [ngValue]="docente.legajo">{{ docente.nombre }}</option>
      </select>
    </div>
  
    <button class="btn btn-primary mt-3" (click)="buscarAlumnos()">
      <i class="bi bi-search"></i> Buscar Alumnos
    </button>
    
  
    <!-- Muestra la lista de alumnos del docente -->
    <div *ngIf="alumnos.length > 0">
      <h4>Lista de Alumnos</h4>
      <ul>
        <li *ngFor="let alumno of alumnos">{{ alumno || 'Sin alumno asignado' }}</li>
      </ul>
    </div>
  </div>
  
  <!-- Tabla para mostrar los cursos -->
  <h2 class="text-center">Lista de Cursos</h2>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Tema</th>
        <th>Fecha Inicio</th>
        <th>Fecha Fin</th>
        <th>Docente</th>
        <th>Precio</th>
        <th>Alumnos</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let curso of cursos">
        <td>{{ curso.id }}</td>
        <td>{{ curso.tema.nombre || 'Sin tema asignado' }}</td> 
        <td>{{ curso.fechaInicio }}</td>
        <td>{{ curso.fechaFin }}</td>
        <td>{{ curso.docente_legajo.nombre || 'Sin docente asignado' }}</td> 
        <td>{{ curso.precio }}</td>
        <td>
          <ul>
            <li *ngFor="let alumno of curso.alumnos">{{ alumno?.nombre || 'Sin alumno asignado' }}</li> <!-- Uso de ?. -->
          </ul>
        </td>
        <td>
          <button class="btn btn-info btn-sm" (click)="editarCurso(curso.id)"> <i class="bi bi-pencil"></i> Editar</button>
          <button class="btn btn-danger btn-sm" (click)="eliminarCurso(curso.id)"> <i class="bi bi-trash"></i> Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>
  <button class="btn btn-primary mb-3" (click)="agregarCurso()">
    <i class="bi bi-plus-circle"></i>     Agregar Curso
  </button>
  
</div>
